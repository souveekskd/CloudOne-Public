# CloudOne

CloudOne is an Azure-first, multi-cloud-ready portal that unifies cost, performance, sustainability, and security posture into one actionable control plane. It ingests Azure telemetry (Cost Management, Monitor, Sustainability, Resource Graph, Security Center), analyzes it with AI, and drives rightsizing, de-orphaning, policy enforcement, green region selection, and IaC generation.

## Features

Based on the project files, the CloudOne portal provides the following capabilities:

### 1. Unified Dashboard
A central dashboard (`azure_landing.html`) aggregates key metrics from across the Azure environment into a single view. This view is powered by a high-performance, parallel-processing backend (`dashboard.py`) that uses an in-memory cache for speed.

**Dashboard Widgets:**
* **Environment Score:** Displays the primary Security Score from Microsoft Defender for Cloud, alongside WAF (Well-Architected Framework) scores for Cost, Reliability, Performance, and Operational Excellence.
* **Key Metrics:** Provides KPI cards for total monthly Carbon Footprint (kgCO2e) and a count of Orphaned Resources.
* **Actionable Insights:** Lists top recommendations for Cost, Security, and Reliability.
* **Resource Inventory:** A doughnut chart showing the distribution of resources (Compute, Storage, Network, etc.).
* **Monitoring Alerts:** Surfaces real-time alerts from the Smart Monitoring service.

### 2. Resource Management
* **My Resources:** A searchable and filterable inventory of all Azure resources, complete with a bar chart visualizing resource distribution by category.
* **Orphan Finder:** A dedicated tool to identify and list unused resources, including:
    * Orphaned Disks (Unattached)
    * Orphaned Network Interfaces (Unattached)
    * Orphaned Public IPs (Unattached)
    * Empty Resource Groups

### 3. Optimization & Sustainability
* **Resource Optimization:** Provides "Cost" and "Performance" optimization recommendations from Azure Advisor.
* **AI Remediation:** For recommendations, users can click an "AI Remediate" button to get step-by-step remediation instructions (including code/CLI commands) generated by an AI service (`ai_service.py`).
* **Carbon Footprint:** A dedicated report showing a breakdown of the latest monthly carbon emissions by Scope 1, Scope 2, and Scope 3.

### 4. Security & Policy
* **Environment Score:** A detailed view of all Advisor pillar scores (Security, Cost, Reliability, etc.) and their impact.
* **Policy Manager:** An interactive tool to manage Azure Policy:
    * View all currently implemented policy assignments.
    * Browse a pre-defined library of recommended CAF (Cloud Adoption Framework) policies.
    * Apply policies (Audit or Enforce) to subscriptions or resource groups directly from the UI.
* **Smart Monitoring:** A tag-based monitoring solution that alerts on resources based on `monitor` and `criticality` tags. It identifies critical resources that are stopped/deallocated or resources that are not configured for monitoring.

### 5. Automation & Migration
* **IaC Generator:** An AI-powered tool to generate Infrastructure as Code. Users can select resources and generate:
    * **Terraform:** Choice of "Custom" modules (root + child modules) or "AVM" (Azure Verified Modules) wrapper modules.
    * **Bicep:** A single, comprehensive `main.bicep` file.
    * **ARM:** A single, complete `template.json` file.
    The UI includes a file-tree viewer, code editor, and an "Export as ZIP" option.
* **Migration Bot:** An AI-architect tool that takes user input about an on-premises application (compute, DB, users, etc.) and a target strategy (IaaS, PaaS, Container) and generates a complete migration plan. The plan includes recommended SKUs, estimated monthly costs, and step-by-step migration guidance.

---

## Tech Stack

The application is built using the following technologies:

* **Backend:**
    * Python (CPython 3.12)
    * Flask (Application server and API)
    * Flask-CORS
* **AI Service:**
    * Google Generative AI (Gemini 2.5 Flash)
* **Azure SDKs (Python):**
    * `azure-identity` (for `DefaultAzureCredential`)
    * `azure-mgmt-resource` (SubscriptionClient, ResourceManagementClient)
    * `azure-mgmt-security` (SecurityCenter)
    * `azure-mgmt-carbonoptimization` (CarbonOptimizationMgmtClient)
    * `azure-mgmt-resourcegraph` (ResourceGraphClient)
    * `azure-mgmt-resource-policy` (PolicyClient)
* **Frontend:**
    * HTML5
    * CSS3 (with a custom `main.css` theme)
    * JavaScript (ES6+)
* **Frontend Libraries:**
    * Chart.js (for dashboards and resource charts)
    * Font Awesome (Icons)
    * JSZip (for exporting IaC zip files)

---

## Project Structure

The project follows a standard Flask application factory pattern:

* `cloudone_app/`: Main application package.
    * `blueprints/`: Contains Flask Blueprints for routing.
        * `views.py`: Defines all frontend (HTML) routes.
        * `api/`: Contains all backend API endpoints (`account.py`, `dashboard.py`, `iac.py`, etc.).
    * `services/`: Houses the core business logic, primarily the `ai_service.py` which interfaces with the Google AI API.
    * `templates/`: All HTML template files.
    * `static/`: CSS, and in the future, JavaScript and image assets.
    * `__init__.py`: The application factory (`create_app`) that initializes Flask, registers blueprints, and sets up logging.
* `config.py`: Handles loading configuration from environment variables.

---

## Configuration

The application is configured using environment variables loaded from a `.env` file located in the project root.

Key environment variables:
* `GOOGLE_API_KEY`: Required for the AI services (IaC Generator, Migration Bot, AI Remediation) to function.
* `DEBUG`: Set to `True` for development mode.
* `HOST`: Host address to run the server on (e.g., `0.0.0.0`).
* `PORT`: Port to run the server on (e.g., `5000`).